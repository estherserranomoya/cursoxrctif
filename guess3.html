<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>3</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Piso -->
      <a-plane rotation="-90 0 0" width="10" height="10" color="#ECECEC"></a-plane>

      <!-- Cámara -->
      <a-entity camera look-controls position="0 1.6 0"></a-entity>

      <!-- Instrucciones -->
      <a-text id="instruction" value="Click on the chair" position="0 3 -4" color="#111" align="center" width="6"></a-text>
      <a-text id="result" value="" position="0 2.7 -4" color="green" align="center" width="6"></a-text>
      <a-text id="score" value="Score: 0" position="0 2.4 -4" color="#000" align="center" width="6"></a-text>

      <!-- Modelos 3D -->
      <a-entity id="bed" 
                gltf-model="https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models@master/2.0/Avocado/glTF/Avocado.gltf" 
                position="-3 0 -4" 
                scale="2 2 2">
      </a-entity>

      <a-entity id="chair" 
                gltf-model="https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models@master/2.0/Chair/glTF/Chair.gltf" 
                position="0 0 -4" 
                scale="1.5 1.5 1.5">
      </a-entity>

      <a-entity id="table" 
                gltf-model="https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models@master/2.0/CesiumMan/glTF/CesiumMan.gltf" 
                position="3 0 -4" 
                scale="1 1 1">
      </a-entity>

      <!-- Audio -->
      <a-assets>
        <audio id="correct-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_768b5b5db1.mp3"></audio>
        <audio id="wrong-sound" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_caf8eeb6a0.mp3"></audio>
      </a-assets>

      <a-entity id="correct-audio" sound="src: #correct-sound"></a-entity>
      <a-entity id="wrong-audio" sound="src: #wrong-sound"></a-entity>

      <!-- Lógica del juego -->
      <script>
        const objects = ["bed", "chair", "table"];
        let correctId = "";
        let score = 0;

        const instruction = document.getElementById("instruction");
        const result = document.getElementById("result");
        const scoreText = document.getElementById("score");
        const correctAudio = document.getElementById("correct-audio");
        const wrongAudio = document.getElementById("wrong-audio");

        const randomize = () => {
          correctId = objects[Math.floor(Math.random() * objects.length)];
          instruction.setAttribute("value", `Click on the ${correctId}`);
          result.setAttribute("value", "");
        };

        objects.forEach(id => {
          const el = document.getElementById(id);
          el.addEventListener("click", () => {
            if (id === correctId) {
              result.setAttribute("value", "Correct!");
              correctAudio.components.sound.playSound();
              score++;
              scoreText.setAttribute("value", `Score: ${score}`);
              setTimeout(randomize, 1500);
            } else {
              result.setAttribute("value", "Oops! Try again.");
              wrongAudio.components.sound.playSound();
              score = Math.max(0, score - 1);
              scoreText.setAttribute("value", `Score: ${score}`);
            }
          });
        });

        randomize();
      </script>
    </a-scene>
  </body>
</html>
